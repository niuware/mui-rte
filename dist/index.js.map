{"version":3,"file":"index.js","sources":["../src/components/Link.tsx","../src/components/ToolbarButton.tsx","../src/utils.ts","../src/components/Toolbar.tsx","../src/components/Media.tsx","../src/components/Blockquote.tsx","../src/components/CodeBlock.tsx","../src/components/UrlPopover.tsx","../src/MUIRichTextEditor.tsx"],"sourcesContent":["import * as React from 'react'\nimport { ContentState } from 'draft-js'\n\ninterface ILinkProps {\n    children?: React.ReactNode\n    contentState: ContentState\n    entityKey: string\n}\n\nconst Link: React.FC<ILinkProps> = (props: ILinkProps) => {\n    const { url } = props.contentState.getEntity(props.entityKey).getData()\n    return (\n        <a \n            href={url} \n            style={{\n                textDecoration: \"underline\",\n                color: \"inherit\"\n            }} \n            className=\"editor-anchor\"\n            target=\"_blank\"\n        >\n            {props.children}\n        </a>\n    )\n}\n\nexport default Link\n","import React, { FunctionComponent } from 'react'\nimport { IconButton } from '@material-ui/core'\nimport { TToolbarComponentProps, TToolbarButtonSize } from './Toolbar'\n\ninterface IToolbarButtonProps {\n    id?: string\n    label: string\n    style: string\n    type: string\n    active?: boolean\n    icon?: JSX.Element\n    onClick?: any\n    inlineMode?: boolean\n    disabled?: boolean\n    size?: TToolbarButtonSize\n    component?: FunctionComponent<TToolbarComponentProps>\n}\n\nconst ToolbarButton: FunctionComponent<IToolbarButtonProps> = (props: IToolbarButtonProps) => {\n    const size = !props.inlineMode ? (props.size || \"medium\") : \"small\"\n    const toolbarId = props.inlineMode ? \"-toolbar\" : \"\"\n    const elemId = (props.id || props.label) + \"-button\" + toolbarId\n    const sharedProps = {\n        id: elemId,\n        onMouseDown: (e: React.MouseEvent) => {\n            e.preventDefault()\n            if (props.onClick) {\n                props.onClick(props.style, props.type, elemId, props.inlineMode)\n            }\n        },\n        disabled: props.disabled || false\n    }\n    if (props.icon) {\n        return (\n            <IconButton\n                {...sharedProps}\n                aria-label={props.label}\n                color={props.active ? \"primary\" : \"default\"}\n                size={size}\n            >\n                {props.icon}\n            </IconButton>\n        )\n    }\n    if (props.component) {\n        return (\n            <props.component \n                {...sharedProps}\n                active={props.active || false}\n            />\n        )\n    }\n    return null\n}\n\nexport default ToolbarButton","import { EditorState, DraftBlockType, ContentBlock, ContentState, \n    Modifier, SelectionState } from 'draft-js'\nimport Immutable from 'immutable'\nimport { TCustomControl } from './components/Toolbar'\n\nexport type TSelectionInfo = {\n    inlineStyle: Immutable.OrderedSet<string>,\n    blockType: DraftBlockType,\n    entityType: string | null,\n    linkKey: string\n    block: ContentBlock\n}\n\n/**\n * Get the current selection details\n */\nconst getSelectionInfo = (editorState: EditorState): TSelectionInfo => {\n    const selection = editorState.getSelection()\n    const startOffset = selection.getStartOffset()\n    const currentContent = editorState.getCurrentContent()\n    const contentBlock = currentContent.getBlockForKey(selection.getStartKey())\n    const currentStyle = editorState.getCurrentInlineStyle()\n    const linkKey = contentBlock.getEntityAt(startOffset)\n    let entityType = null\n    if (linkKey) {\n        const linkInstance = currentContent.getEntity(linkKey)\n        entityType = linkInstance.getType()\n    }\n    return {\n        inlineStyle: currentStyle,\n        blockType: contentBlock.getType(),\n        entityType: entityType,\n        linkKey: linkKey,\n        block: contentBlock\n    }\n}\n\n/**\n * Spacing compatible for material-ui v3.2.x ~ v.4.x.x\n */\nconst getCompatibleSpacing = (spacing: any, \n    top: number, \n    right: number, \n    bottom: number, \n    left: number) => {\n    if (typeof spacing === \"function\") {\n        return spacing(top, right, bottom, left)\n    }\n    const unit = (spacing as any).unit\n    return `${top * unit}px ${right * unit}px ${bottom * unit}px ${left * unit}px`\n}\n\n/**\n * Remove a block from the ContentState\n */\nconst removeBlockFromMap = (editorState: EditorState, block: ContentBlock): ContentState => {\n    const contentState = editorState.getCurrentContent()\n    const removeBlockContentState = Modifier.removeRange(\n        contentState,\n        new SelectionState({\n            anchorKey: block.getKey(),\n            anchorOffset: 0,\n            focusKey: block.getKey(),\n            focusOffset: block.getLength(),\n        }),\n        'backward'\n    )\n    const blockMap = removeBlockContentState.getBlockMap().delete(block.getKey())\n    return removeBlockContentState.merge({\n        blockMap,\n        selectionAfter: contentState.getSelectionAfter()\n    }) as ContentState\n}\n\nconst atomicBlockExists = (name: string, controls?: TCustomControl[]) => {\n    if (!controls) {\n        return undefined\n    }\n    return controls.find(control => \n        control.type === \"atomic\" && \n        control.name === name && \n        control.atomicComponent !== undefined)\n}\n\nexport { getSelectionInfo, getCompatibleSpacing, removeBlockFromMap, atomicBlockExists }\n","import React, { FunctionComponent, useState, useEffect } from 'react'\nimport { EditorState } from 'draft-js'\nimport FormatBoldIcon from '@material-ui/icons/FormatBold'\nimport FormatItalicIcon from '@material-ui/icons/FormatItalic'\nimport FormatUnderlinedIcon from '@material-ui/icons/FormatUnderlined'\nimport StrikethroughIcon from '@material-ui/icons/StrikethroughS'\nimport HighlightIcon from '@material-ui/icons/Highlight'\nimport TitleIcon from '@material-ui/icons/Title'\nimport InsertLinkIcon from '@material-ui/icons/InsertLink'\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary'\nimport FormatListNumberedIcon from '@material-ui/icons/FormatListNumbered'\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted'\nimport FormatQuoteIcon from '@material-ui/icons/FormatQuote'\nimport CodeIcon from '@material-ui/icons/Code'\nimport FormatClearIcon from '@material-ui/icons/FormatClear'\nimport SaveIcon from '@material-ui/icons/Save'\nimport UndoIcon from '@material-ui/icons/Undo'\nimport RedoIcon from '@material-ui/icons/Redo'\nimport ToolbarButton from './ToolbarButton'\nimport { getSelectionInfo } from '../utils'\n\nexport type TToolbarControl =\n    \"h1\" | \"h2\" | \"h3\" | \"bold\" | \"italic\" | \"underline\" | \"link\" | \"numberList\" |\n    \"bulletList\" | \"quote\" | \"code\" | \"clear\" | \"save\" | \"media\" |\n    \"strikethrough\" | \"highlight\" | string\n\nexport type TControlType = \"inline\" | \"block\" | \"callback\" | \"atomic\"\n\nexport type TToolbarButtonSize = \"small\" | \"medium\"\n\nexport type TToolbarComponentProps = {\n    id: string,\n    onMouseDown: (e: React.MouseEvent) => void,\n    active: boolean,\n    disabled: boolean\n}\n\nexport type TCustomControl = {\n    id?: string\n    name: string\n    icon?: JSX.Element\n    type: TControlType\n    component?: FunctionComponent<TToolbarComponentProps>\n    inlineStyle?: React.CSSProperties\n    blockWrapper?: React.ReactElement\n    atomicComponent?: FunctionComponent\n    onClick?: (editorState: EditorState, name: string, anchor: HTMLElement | null) => EditorState | void\n}\n\ntype TStyleType = {\n    id?: string\n    name: TToolbarControl | string\n    label: string\n    style: string\n    icon?: JSX.Element\n    component?: FunctionComponent<TToolbarComponentProps>\n    type: TControlType\n    active?: boolean\n    clickFnName?: string\n}\n\nconst STYLE_TYPES: TStyleType[] = [\n    {\n        label: 'H1',\n        name: \"h1\",\n        style: 'header-one',\n        icon: React.createElement('span', null, 'H1'),\n        type: \"block\"\n    },\n    {\n        label: 'H2',\n        name: \"h2\",\n        style: 'header-two',\n        icon: React.createElement('span', null, 'H2'),\n        type: \"block\"\n    },\n    {\n        label: 'H3',\n        name: \"h3\",\n        style: 'header-three',\n        icon: React.createElement('span', null, 'H3'),\n        type: \"block\"\n    },\n    {\n        label: 'Bold',\n        name: \"bold\",\n        style: 'BOLD',\n        icon: <FormatBoldIcon />,\n        type: \"inline\"\n    },\n    {\n        label: 'Italic',\n        name: \"italic\",\n        style: 'ITALIC',\n        icon: <FormatItalicIcon />,\n        type: \"inline\"\n    },\n    {\n        label: 'Underline',\n        name: \"underline\",\n        style: 'UNDERLINE',\n        icon: <FormatUnderlinedIcon />,\n        type: \"inline\"\n    },\n    {\n        label: 'Strikethrough',\n        name: \"strikethrough\",\n        style: 'STRIKETHROUGH',\n        icon: <StrikethroughIcon />,\n        type: \"inline\"\n    },\n    {\n        label: 'Highlight',\n        name: \"highlight\",\n        style: 'HIGHLIGHT',\n        icon: <HighlightIcon />,\n        type: \"inline\"\n    },\n    {\n        label: 'Undo',\n        name: \"undo\",\n        style: \"UNDO\",\n        icon: <UndoIcon />,\n        type: \"callback\",\n    },\n    {\n        label: 'Redo',\n        name: \"redo\",\n        style: \"REDO\",\n        icon: <RedoIcon />,\n        type: \"callback\",\n    },\n    {\n        label: 'Link',\n        name: \"link\",\n        style: 'LINK',\n        icon: <InsertLinkIcon />,\n        type: \"callback\",\n        id: \"mui-rte-link-control\"\n    },\n    {\n        label: 'Media',\n        name: \"media\",\n        style: 'IMAGE',\n        icon: <PhotoLibraryIcon />,\n        type: \"callback\",\n        id: \"mui-rte-media-control\"\n    },\n    {\n        label: 'OL',\n        name: \"bulletList\",\n        style: 'ordered-list-item',\n        icon: <FormatListNumberedIcon />,\n        type: \"block\"\n    },\n    {\n        label: 'UL',\n        name: \"numberList\",\n        style: 'unordered-list-item',\n        icon: <FormatListBulletedIcon />,\n        type: \"block\"\n    },\n    {\n        label: 'Blockquote',\n        name: \"quote\",\n        style: 'blockquote',\n        icon: <FormatQuoteIcon />,\n        type: \"block\"\n    },\n    {\n        label: 'Code Block',\n        name: \"code\",\n        style: 'code-block',\n        icon: <CodeIcon />,\n        type: \"block\"\n    },\n    {\n        label: 'Clear',\n        name: \"clear\",\n        style: 'clear',\n        icon: <FormatClearIcon />,\n        type: \"callback\"\n    },\n    {\n        label: 'Save',\n        name: \"save\",\n        style: 'save',\n        icon: <SaveIcon />,\n        type: \"callback\"\n    }\n]\n\ntype TToolbarProps = {\n    id: string\n    editorState: EditorState\n    controls?: Array<TToolbarControl>\n    customControls?: TCustomControl[]\n    onClick: (style: string, type: string, id: string, inlineMode?: boolean) => void\n    inlineMode?: boolean\n    className?: string\n    disabled?: boolean\n    size?: TToolbarButtonSize\n}\n\nconst Toolbar: FunctionComponent<TToolbarProps> = (props) => {\n    const [availableControls, setAvailableControls] = useState(props.controls ? [] : STYLE_TYPES)\n    const {editorState} = props\n    const id = props.inlineMode ? \"-inline-toolbar\" : \"-toolbar\"\n\n    useEffect(() => {\n        if (!props.controls) {\n            return\n        }\n        const filteredControls: TStyleType[] = []\n        const controls = props.controls.filter((control, index) => props.controls!.indexOf(control) >= index)\n        controls.forEach(name => {\n            const style = STYLE_TYPES.find(style => style.name === name)\n            if (style) {\n                filteredControls.push(style)\n            }\n            else if (props.customControls) {\n                const customControl = props.customControls.find(style => style.name === name)\n                if (customControl && customControl.type !== \"atomic\" &&\n                    (customControl.icon || customControl.component)) {\n                    filteredControls.push({\n                        id: customControl.id || (customControl.name + \"Id\"),\n                        name: customControl.name,\n                        label: customControl.name,\n                        style: customControl.name.toUpperCase(),\n                        icon: customControl.icon,\n                        component: customControl.component,\n                        type: customControl.type,\n                        clickFnName: \"onCustomClick\"\n                    })\n                }\n            }\n        })\n        setAvailableControls(filteredControls)\n    }, [props.controls, props.customControls])\n\n    return (\n        <div id={`${props.id}${id}`} className={props.className}>\n            {availableControls.map(style => {\n                if (props.inlineMode &&\n                    (style.type !== \"inline\" && (style.name !== \"link\" && style.name !== \"clear\"))) {\n                    return null\n                }\n                let active = false\n                const action = props.onClick\n                if (style.type === \"inline\") {\n                    active = editorState.getCurrentInlineStyle().has(style.style)\n                }\n                else if (style.type === \"block\") {\n                    const selection = editorState.getSelection()\n                    const block = editorState.getCurrentContent().getBlockForKey(selection.getStartKey())\n                    if (block) {\n                        active = style.style === block.getType()\n                    }\n                }\n                else {\n                    if (style.style === \"IMAGE\" || style.style === \"LINK\") {\n                        active = style.style === getSelectionInfo(editorState).entityType\n                    }\n                }\n\n                return (\n                    <ToolbarButton\n                        id={style.id}\n                        key={`key-${style.label}`}\n                        active={active}\n                        label={style.label}\n                        onClick={action}\n                        style={style.style}\n                        type={style.type}\n                        icon={style.icon}\n                        component={style.component}\n                        inlineMode={props.inlineMode}\n                        disabled={props.disabled}\n                        size={props.size}\n                    />\n                )\n            })}\n        </div>\n    )\n}\nexport default Toolbar\n","import React, { FunctionComponent } from 'react'\nimport classNames from 'classnames'\nimport { ContentState, ContentBlock } from 'draft-js'\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles'\n\nconst styles = ({ shadows }: Theme) => createStyles({\n    root: {\n        margin: \"5px 0 1px\",\n        outline: \"none\"\n    },\n    editable: {\n        cursor: \"pointer\",\n        \"&:hover\": {\n            boxShadow: shadows[3]\n        }\n    },\n    focused: {\n        boxShadow: shadows[3]\n    },\n    centered: {\n        textAlign: \"center\"\n    },\n    leftAligned: {\n        textAlign: \"left\"\n    },\n    rightAligned: {\n        textAlign: \"right\"\n    }\n})\n\ninterface IMediaProps extends WithStyles<typeof styles> {\n    block: ContentBlock\n    contentState: ContentState\n    blockProps: any\n    onClick: (block: ContentBlock) => void\n}\n\nconst Media: FunctionComponent<IMediaProps> = (props) => {\n    const { url, width, height, alignment, type } = props.contentState.getEntity(props.block.getEntityAt(0)).getData()\n    const { onClick, readOnly, focusKey } = props.blockProps\n\n    const htmlTag = () => {\n        const componentProps = {\n            src: url,\n            className: classNames(props.classes.root, {\n                [props.classes.editable]: !readOnly,\n                [props.classes.focused]: !readOnly && focusKey === props.block.getKey()\n            }),\n            width: width,\n            height: type === \"video\" ? \"auto\" : height,\n            onClick: () => {\n                if (readOnly) {\n                    return\n                }\n                onClick(props.block)\n            }\n        }\n\n        if (!type || type === \"image\") {\n            return <img {...componentProps} />\n        }\n        if (type === \"video\") {\n            return <video {...componentProps} autoPlay={false} controls />\n        }\n        return null\n    }\n\n    return (\n        <div className={classNames({\n            [props.classes.centered]: alignment === \"center\",\n            [props.classes.leftAligned]: alignment === \"left\",\n            [props.classes.rightAligned]: alignment === \"right\"\n        })}>\n            {htmlTag()}\n        </div>\n    )\n}\n\nexport default withStyles(styles, { withTheme: true })(Media)\n","import * as React from 'react'\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles'\n\nconst styles = ({ palette }: Theme) => createStyles({\n    root: {\n        fontStyle: \"italic\",\n        color: palette.grey[800],\n        borderLeft: `4px solid ${palette.grey.A100}`\n    }\n})\n\ninterface IBlockquoteProps extends WithStyles<typeof styles> {\n    children?: React.ReactNode\n}\n\nconst Blockquote: React.FC<IBlockquoteProps> = (props: IBlockquoteProps) => {\n    return (\n        <div className={props.classes.root}>\n            {props.children}\n        </div>\n    )\n}\n\nexport default withStyles(styles, { withTheme: true })(Blockquote)","import * as React from 'react'\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles'\nimport { getCompatibleSpacing } from '../utils'\n\nconst styles = ({ spacing, palette }: Theme) => createStyles({\n    root: {\n        backgroundColor: palette.grey[200],\n        padding: getCompatibleSpacing(spacing, 1, 2, 1, 2)\n    }\n})\n\ninterface IBlockquoteProps extends WithStyles<typeof styles> {\n    children?: React.ReactNode\n}\n\nconst CodeBlock: React.FC<IBlockquoteProps> = (props: IBlockquoteProps) => {\n    console.log(props);\n    return (\n        <div className={props.classes.root}>\n            <pre style={{whiteSpace: 'pre-wrap'}}>\n                {props.children}\n            </pre>\n        </div>\n    )\n}\n\nexport default withStyles(styles, { withTheme: true })(CodeBlock)\n","import React, { FunctionComponent, useState } from 'react'\nimport { Popover, TextField, Grid, Button } from '@material-ui/core'\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles'\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\nimport InsertPhotoIcon from '@material-ui/icons/InsertPhoto'\nimport MovieIcon from '@material-ui/icons/Movie'\nimport CheckIcon from '@material-ui/icons/Check'\nimport DeleteIcon from '@material-ui/icons/DeleteOutline'\nimport FormatAlignCenter from '@material-ui/icons/FormatAlignCenter'\nimport FormatAlignLeft from '@material-ui/icons/FormatAlignLeft'\nimport FormatAlignRight from '@material-ui/icons/FormatAlignRight'\nimport { getCompatibleSpacing } from '../utils'\n\nconst styles = ({ spacing }: Theme) => createStyles({\n    linkPopover: {\n        padding: getCompatibleSpacing(spacing, 2, 2, 2, 2),\n        minWidth: \"90%\",\n    },\n    linkTextField: {\n        width: \"100%\"\n    }\n})\n\nexport type TAlignment = \"left\" | \"center\" | \"right\"\n\nexport type TMediaType = \"image\" | \"video\"\n\nexport type TUrlData = {\n    url?: string\n    width?: number\n    height?: number\n    alignment?: TAlignment\n    type?: TMediaType\n}\n\ninterface IUrlPopoverStateProps extends WithStyles<typeof styles> {\n    anchor?: HTMLElement\n    data?: TUrlData\n    isMedia?: boolean\n    onConfirm: (isMedia?: boolean, ...args: any) => void\n    onCancel: () => void\n}\n\nconst UrlPopover: FunctionComponent<IUrlPopoverStateProps> = (props) => {\n    const [data, setData] = useState<TUrlData>(props.data || {\n        url: undefined,\n        width: undefined,\n        height: undefined,\n        alignment: undefined,\n        type: undefined\n    })\n\n    const { classes } = props\n\n    const onSizeChange = (value: any, prop: \"width\" | \"height\") => {\n        if (value === \"\") {\n            setData({ ...data, [prop]: undefined })\n            return\n        }\n        const intValue = parseInt(value, 10)\n        if (isNaN(intValue)) {\n            return\n        }\n        setData({ ...data, [prop]: intValue })\n    }\n\n    return (\n        <Popover\n            onClose={props.onCancel}\n            open={props.anchor !== undefined}\n            anchorEl={props.anchor}\n            anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\"\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n            }}\n            PaperProps={{\n                style: { width: '70%' },\n            }}\n        >\n            <div className={classes.linkPopover}>\n                <Grid container spacing={1}>\n                    <Grid container item xs spacing={1}>\n                        <Grid item xs={12}>\n                            <TextField\n                                className={classes.linkTextField}\n                                onChange={(event) => {\n                                    setData({...data, url: event.target.value})\n                                }}\n                                label=\"URL\"\n                                defaultValue={props.data && props.data.url}\n                                autoFocus={true}\n                                multiline={true}\n                                InputLabelProps={{\n                                    shrink: true\n                                }}\n                            />\n                        </Grid>\n                        {props.isMedia ?\n                            <>\n                                <Grid item xs={12}>\n                                    <ButtonGroup fullWidth>\n                                        <Button\n                                            color={(!data.type || data.type === \"image\") ? \"primary\" : \"default\"}\n                                            size=\"small\"\n                                            onClick={() => setData({...data, type: \"image\"})}\n                                        >\n                                            <InsertPhotoIcon />\n                                        </Button>\n                                        <Button\n                                            color={data.type === \"video\" ? \"primary\" : \"default\"}\n                                            size=\"small\"\n                                            onClick={() => setData({...data, type: \"video\"})}\n                                        >\n                                            <MovieIcon />\n                                        </Button>\n                                    </ButtonGroup>\n                                </Grid>\n                                <Grid item xs={6}>\n                                    <TextField\n                                        onChange={(event) => onSizeChange(event.target.value, \"width\")}\n                                        value={data.width || \"\"}\n                                        label=\"Width\"\n                                        InputLabelProps={{\n                                            shrink: true\n                                        }}\n                                    />\n                                </Grid>\n                                <Grid item xs={6}>\n                                    <TextField\n                                        onChange={(event) => onSizeChange(event.target.value, \"height\")}\n                                        value={data.height || \"\"}\n                                        label=\"Height\"\n                                        InputLabelProps={{\n                                            shrink: true\n                                        }}\n                                    />\n                                </Grid>\n                                <Grid item xs={12}>\n                                    <ButtonGroup fullWidth>\n                                        <Button\n                                            color={data.alignment === \"left\" ? \"primary\" : \"default\"}\n                                            size=\"small\"\n                                            onClick={() => setData({...data, alignment: \"left\"})}\n                                        >\n                                            <FormatAlignLeft />\n                                        </Button>\n                                        <Button\n                                            color={data.alignment === \"center\" ? \"primary\" : \"default\"}\n                                            size=\"small\"\n                                            onClick={() => setData({...data, alignment: \"center\"})}\n                                        >\n                                            <FormatAlignCenter />\n                                        </Button>\n                                        <Button\n                                            color={data.alignment === \"right\" ? \"primary\" : \"default\"}\n                                            size=\"small\"\n                                            onClick={() => setData({...data, alignment: \"right\"})}>\n                                            <FormatAlignRight />\n                                        </Button>\n                                    </ButtonGroup>\n                                </Grid>\n                            </>\n                            : null}\n                    </Grid>\n                    <Grid container item xs={12} direction=\"row\" justify=\"flex-end\">\n                        {props.data && props.data.url ?\n                        <Button\n                            onClick={() => props.onConfirm(props.isMedia, \"\")}\n                        >\n                            <DeleteIcon />\n                        </Button>\n                        : null }\n                        <Button\n                            onClick={() => props.onConfirm(props.isMedia, data.url, data.width, data.height, data.alignment, data.type)}\n                        >\n                            <CheckIcon />\n                        </Button>\n                    </Grid>\n                </Grid>\n            </div>\n        </Popover>\n    )\n}\n\nexport default withStyles(styles, { withTheme: true })(UrlPopover)\n","import React, { FunctionComponent, useEffect, useState, useRef,\n    forwardRef, useImperativeHandle, RefForwardingComponent } from 'react'\nimport Immutable from 'immutable'\nimport classNames from 'classnames'\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles'\nimport { Paper } from '@material-ui/core'\nimport {\n    Editor, EditorState, convertFromRaw, RichUtils, AtomicBlockUtils,\n    CompositeDecorator, convertToRaw, DefaultDraftBlockRenderMap, DraftEditorCommand,\n    DraftHandleValue, DraftStyleMap, ContentBlock, DraftDecorator, getVisibleSelectionRect,\n    SelectionState, KeyBindingUtil, getDefaultKeyBinding, ContentState\n} from 'draft-js'\nimport Toolbar, { TToolbarControl, TCustomControl, TToolbarButtonSize } from './components/Toolbar'\nimport Media from './components/Media'\nimport Blockquote from './components/Blockquote'\nimport CodeBlock from './components/CodeBlock'\n\nimport UrlPopover, { TAlignment, TUrlData, TMediaType } from './components/UrlPopover'\nimport { getSelectionInfo, getCompatibleSpacing, removeBlockFromMap, atomicBlockExists } from './utils'\n\nconst styles = ({ spacing, typography, palette }: Theme) => createStyles({\n    root: {\n    },\n    container: {\n        margin: getCompatibleSpacing(spacing, 1, 0, 0, 0),\n        fontFamily: typography.body1.fontFamily,\n        fontSize: typography.body1.fontSize,\n        '& figure': {\n            margin: 0\n        }\n    },\n    inheritFontSize: {\n        fontSize: \"inherit\"\n    },\n    editor: {\n    },\n    editorContainer: {\n        margin: getCompatibleSpacing(spacing, 1, 0, 0, 0),\n        cursor: \"text\",\n        width: \"100%\",\n        padding: getCompatibleSpacing(spacing, 0, 0, 1, 0)\n    },\n    editorReadOnly: {\n        borderBottom: \"none\"\n    },\n    error: {\n        borderBottom: \"2px solid red\"\n    },\n    hidePlaceholder: {\n        display: \"none\"\n    },\n    placeHolder: {\n        color: palette.grey[600]\n    },\n    linkPopover: {\n        padding: getCompatibleSpacing(spacing, 2, 2, 2, 2)\n    },\n    linkTextField: {\n        width: \"100%\"\n    },\n    anchorLink: {\n        textDecoration: \"underline\",\n        color: palette.secondary.main\n    },\n    toolbar: {\n    },\n    inlineToolbar: {\n        maxWidth: \"180px\",\n        position: \"absolute\",\n        padding: \"5px\",\n        zIndex: 10\n    }\n})\n\nexport type TDecorator = {\n    component: FunctionComponent\n    regex: RegExp\n}\n\ntype TDraftEditorProps = {\n    spellCheck?: boolean\n    stripPastedStyles?: boolean\n}\n\ntype TKeyCommand = {\n    key: number\n    name: string\n    callback: (state: EditorState) => EditorState\n}\n\ninterface IMUIRichTextEditorProps extends WithStyles<typeof styles> {\n    id?: string\n    label?: string,\n    readOnly?: boolean\n    inheritFontSize?: boolean\n    error?: boolean\n    controls?: Array<TToolbarControl>\n    customControls?: TCustomControl[]\n    decorators?: TDecorator[]\n    toolbar?: boolean\n    toolbarButtonSize?: TToolbarButtonSize\n    inlineToolbar?: boolean\n    inlineToolbarControls?: Array<TToolbarControl>\n    draftEditorProps?: TDraftEditorProps\n    keyCommands?: TKeyCommand[]\n    maxLength?: number\n    onSave?: (data: string) => void\n    onChange?: (state: EditorState) => void\n    editorState: EditorState\n}\n\ntype IMUIRichTextEditorState = {\n    anchorUrlPopover?: HTMLElement\n    urlKey?: string\n    urlData?: TUrlData\n    urlIsMedia?: boolean\n    toolbarPosition?: TToolbarPosition\n}\n\ntype TStateOffset = {\n    start: number,\n    end: number\n}\n\ntype TToolbarPosition = {\n    top: number\n    left: number\n}\n\ntype TCustomRenderers = {\n    style?: DraftStyleMap\n    block?: Immutable.Map<any, any>\n}\n\nconst blockRenderMap = Immutable.Map({\n    'blockquote': {\n        element: \"blockquote\",\n        wrapper: <Blockquote />\n    },\n    'code-block': {\n        element: \"span\",\n        wrapper: <CodeBlock />\n    }\n})\nconst styleRenderMap: DraftStyleMap = {\n    // 'STRIKETROUGH': {\n    //     textDecoration: \"line-through\"\n    // },\n    'HIGHLIGHT': {\n        backgroundColor: \"yellow\"\n    }\n}\n\nconst { hasCommandModifier } = KeyBindingUtil\n\nconst findLinkEntities = (contentBlock: any, callback: any, contentState: any) => {\n    contentBlock.findEntityRanges(\n        (character: any) => {\n            const entityKey = character.getEntity()\n            return (\n                entityKey !== null &&\n                contentState.getEntity(entityKey).getType() === 'LINK'\n            )\n        },\n        callback\n    )\n}\n\nconst findDecoWithRegex = (regex: RegExp, contentBlock: any, callback: any) => {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nconst MUIRichTextEditor: RefForwardingComponent<any, IMUIRichTextEditorProps> = (props, ref) => {\n    const { classes, controls, customControls } = props\n    const [state, setState] = useState<IMUIRichTextEditorState>({})\n    const [focus, setFocus] = useState(false)\n\n    const editorState = props.editorState;\n\n    //const [editorState, setEditorState] = useState(() => useEditorState(props))\n    const [customRenderers, setCustomRenderers] = useState<TCustomRenderers>({\n        style: undefined,\n        block: undefined\n    })\n    const [focusMediaKey, setFocusMediaKey] = useState(\"\")\n\n    const editorRef = useRef(null)\n    const selectionRef = useRef<TStateOffset>({\n        start: 0,\n        end: 0\n    })\n    const toolbarPositionRef = useRef<TToolbarPosition | undefined>(undefined)\n    const editorStateRef = useRef<EditorState>(editorState)\n\n    /**\n     * Expose methods\n     */\n    useImperativeHandle(ref, () => ({\n        focus: () => {\n            handleFocus()\n        },\n        save: () => {\n            handleSave()\n        },\n        insertAtomicBlock: (name: string, data: any) => {\n            handleInsertAtomicBlock(name, data)\n        }\n    }))\n\n    useEffect(() => {\n        //const editorState = useEditorState(props)\n        const customBlockMap: any = {}\n        const customStyleMap = JSON.parse(JSON.stringify(styleRenderMap))\n        if (props.customControls) {\n            props.customControls.forEach(control => {\n                if (control.type === \"inline\" && control.inlineStyle) {\n                    customStyleMap[control.name.toUpperCase()] = control.inlineStyle\n                }\n                else if (control.type === \"block\" && control.blockWrapper) {\n                    customBlockMap[control.name.toUpperCase()] = {\n                        element: \"div\",\n                        wrapper: control.blockWrapper\n                    }\n                }\n            })\n        }\n        setCustomRenderers({\n            style: customStyleMap,\n            block: DefaultDraftBlockRenderMap.merge(blockRenderMap, Immutable.Map(customBlockMap))\n        })\n        //handleChange(editorState);\n        //setEditorState(editorState)\n        toggleMouseUpListener(true)\n        return () => {\n            toggleMouseUpListener()\n        }\n    }, [])\n\n    useEffect(() => {\n        editorStateRef.current = editorState\n    }, [editorState])\n\n    useEffect(() => {\n        toolbarPositionRef.current = state.toolbarPosition\n    }, [state.toolbarPosition])\n\n    const handleMouseUp = (event: any) => {\n        const nodeName = event.target.nodeName\n        if (nodeName === \"IMG\" || nodeName === \"VIDEO\"){\n            return\n        }\n        setTimeout(() => {\n            const selection = editorStateRef.current!.getSelection()\n            if (selection.isCollapsed() || (toolbarPositionRef !== undefined &&\n                selectionRef.current.start === selection.getStartOffset() &&\n                selectionRef.current.end === selection.getEndOffset())) {\n                    const selectionInfo = getSelectionInfo(editorStateRef.current!)\n                    if (selectionInfo.entityType === \"IMAGE\") {\n                        focusMedia(selectionInfo.block)\n                        return\n                    }\n                    setState({\n                        ...state,\n                        toolbarPosition: undefined\n                    })\n                return\n            }\n\n            selectionRef.current = {\n                start: selection.getStartOffset(),\n                end: selection.getEndOffset()\n            }\n\n            const editor: HTMLElement = (editorRef.current as any).editor\n            const selectionRect = getVisibleSelectionRect(window)\n            const editorRect = editor.getBoundingClientRect()\n            if (!selectionRect) {\n                return\n            }\n            const position = {\n                top: editor.offsetTop - 48 + (selectionRect.top - editorRect.top),\n                left: editor.offsetLeft + (selectionRect.left - editorRect.left)\n            }\n            setState({\n                ...state,\n                toolbarPosition: position\n            })\n        }, 1)\n    }\n\n    const handleChange = (state: EditorState) => {\n        //setEditorState(state)\n        if (props.onChange) {\n            props.onChange(state)\n        }\n    }\n\n    const handleBeforeInput = (): DraftHandleValue => {\n        if (props.maxLength) {\n            const length = editorState.getCurrentContent().getPlainText('').length\n            if (length >= props.maxLength) {\n                return \"handled\"\n            }\n        }\n        return \"not-handled\"\n    }\n\n    const handleFocus = () => {\n        setFocus(true)\n        setTimeout(() => (editorRef.current as any).focus(), 0)\n    }\n\n    const handleBlur = () => {\n        setFocus(false)\n        if (!state.anchorUrlPopover) {\n            setState({\n                ...state,\n                toolbarPosition: undefined\n            })\n        }\n    }\n\n    const handleClearFormat = () => {\n        const selectionInfo = getSelectionInfo(editorState)\n        let newEditorState = editorState\n        selectionInfo.inlineStyle.forEach((effect) => {\n            if (effect) {\n                newEditorState = RichUtils.toggleInlineStyle(newEditorState, effect)\n            }\n        })\n        newEditorState = RichUtils.toggleBlockType(newEditorState, selectionInfo.blockType)\n        handleChange(newEditorState);\n    }\n\n    const handleSave = () => {\n        if (props.onSave) {\n            props.onSave(JSON.stringify(convertToRaw(editorState.getCurrentContent())))\n        }\n    }\n\n    const handleInsertAtomicBlock = (name: string, data: any) => {\n        const block = atomicBlockExists(name, props.customControls)\n        if (!block) {\n            return\n        }\n        const newEditorState = insertAtomicBlock(block.name.toUpperCase(), data, {\n            selection: editorState.getCurrentContent().getSelectionAfter()\n        })\n        updateStateForPopover(newEditorState)\n    }\n\n    const handleKeyCommand = (command: DraftEditorCommand, editorState: EditorState): DraftHandleValue => {\n        const newState = RichUtils.handleKeyCommand(editorState, command)\n        if (newState) {\n            handleChange(newState)\n            return \"handled\"\n        }\n        else {\n            if (props.keyCommands) {\n                const keyCommand = props.keyCommands.find(comm => comm.name === command)\n                if (keyCommand) {\n                    const newState = keyCommand.callback(editorState)\n                    handleChange(newState)\n                    return \"handled\"\n                }\n            }\n        }\n        return \"not-handled\"\n    }\n\n    const handleCustomClick = (style: any, id: string) => {\n        if (!props.customControls) {\n            return\n        }\n        for (let control of props.customControls) {\n            if (control.name.toUpperCase() === style) {\n                if (control.onClick) {\n                    setTimeout(() => (editorRef.current as any).blur(), 0)\n                    const newState = control.onClick(editorState, control.name, document.getElementById(id))\n                    if (newState) {\n                        if (newState.getSelection().isCollapsed()) {\n                            handleChange(newState)\n                        }\n                        else {\n                            updateStateForPopover(newState)\n                        }\n                    }\n                    else {\n                        if (!editorState.getSelection().isCollapsed()) {\n                            refocus()\n                        }\n                    }\n                }\n                break\n            }\n        }\n    }\n\n    const handleUndo = () => {\n        handleChange(EditorState.undo(editorState))\n    }\n\n    const handleRedo = () => {\n        handleChange(EditorState.redo(editorState))\n    }\n\n    const handlePrompt = (lastState: EditorState, type: \"link\" | \"media\", inlineMode?: boolean) => {\n        const selectionInfo = getSelectionInfo(lastState)\n        const contentState = lastState.getCurrentContent()\n        const linkKey = selectionInfo.linkKey\n        let data = undefined\n        if (linkKey) {\n            const linkInstance = contentState.getEntity(linkKey)\n            data = linkInstance.getData()\n        }\n        setState({\n            urlData: data,\n            urlKey: linkKey,\n            toolbarPosition: !inlineMode && type !== \"link\" ? undefined : state.toolbarPosition,\n            anchorUrlPopover: !inlineMode ? document.getElementById(`mui-rte-${type}-control-button`)!\n                                            : document.getElementById(`mui-rte-${type}-control-button-toolbar`)!,\n            urlIsMedia: type === \"media\" ? true : undefined\n        })\n    }\n\n    const handlePromptForLink = (inlineMode?: boolean) => {\n        const selection = editorState.getSelection()\n\n        if (!selection.isCollapsed()) {\n            handlePrompt(editorState, \"link\", inlineMode)\n        }\n    }\n\n    const handlePromptForMedia = (inlineMode?: boolean, newState?: EditorState) => {\n        const lastState = newState || editorState\n        handlePrompt(lastState, \"media\", inlineMode)\n    }\n\n    const handleConfirmPrompt = (isMedia?: boolean, ...args: any) => {\n        if (isMedia) {\n            confirmMedia(...args)\n            return\n        }\n        confirmLink(...args)\n    }\n\n    const handleToolbarClick = (style: string, type: string, id: string, inlineMode?: boolean) => {\n        if (type === \"inline\") {\n            return toggleInlineStyle(style)\n        }\n        if (type === \"block\") {\n            return toggleBlockType(style)\n        }\n        switch (style) {\n            case \"UNDO\":\n                handleUndo()\n                break\n            case \"REDO\":\n                handleRedo()\n                break\n            case \"LINK\":\n                handlePromptForLink(inlineMode)\n                break\n            case \"IMAGE\":\n                handlePromptForMedia(inlineMode)\n                break\n            case \"clear\":\n                handleClearFormat()\n                break\n            case \"save\":\n                handleSave()\n                break\n            default:\n                handleCustomClick(style, id)\n        }\n    }\n\n    const toggleMouseUpListener = (addAfter = false) => {\n        const editor: HTMLElement = (editorRef.current as any).editor\n        if (!editor) {\n            return\n        }\n        editor.removeEventListener(\"mouseup\", handleMouseUp)\n        if (addAfter) {\n            editor.addEventListener(\"mouseup\", handleMouseUp)\n        }\n    }\n\n    const removeLink = () => {\n        const selection = editorState.getSelection()\n        updateStateForPopover(RichUtils.toggleLink(editorState, selection, null))\n    }\n\n    const confirmLink = (url?: string) => {\n        const { urlKey } = state\n        if (!url) {\n            if (urlKey) {\n                removeLink()\n                return\n            }\n            setState({\n                ...state,\n                anchorUrlPopover: undefined\n            })\n            return\n        }\n\n        const contentState = editorState.getCurrentContent()\n        let replaceEditorState = null\n        const data = {\n            url: url\n        }\n\n        if (urlKey) {\n            contentState.replaceEntityData(urlKey, data)\n            replaceEditorState = EditorState.push(editorState, contentState, \"apply-entity\")\n        }\n        else {\n            const contentStateWithEntity = contentState.createEntity('LINK', 'MUTABLE', data)\n            const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n            const newEditorState = EditorState.set(editorState, { currentContent: contentStateWithEntity })\n            replaceEditorState = RichUtils.toggleLink(\n                newEditorState,\n                newEditorState.getSelection(),\n                entityKey)\n        }\n        updateStateForPopover(replaceEditorState)\n    }\n\n    const removeMedia = () => {\n        const blockKey = editorState.getSelection().getStartKey()\n        const contentState = editorState.getCurrentContent()\n        const mediaBlock = contentState.getBlockForKey(blockKey)\n        const newContentState = removeBlockFromMap(editorState, mediaBlock)\n        const newEditorState = EditorState.push(editorState, newContentState, \"remove-range\")\n        handleChange(newEditorState)\n    }\n\n    const confirmMedia = (url?: string, width?: number, height?: number, alignment?: TAlignment, type?: TMediaType) => {\n        const { urlKey } = state\n        if (!url) {\n            if (urlKey) {\n                removeMedia()\n            }\n            setState({\n                ...state,\n                anchorUrlPopover: undefined\n            })\n            return\n        }\n\n        const contentState = editorState.getCurrentContent()\n        const data = {\n            url: url,\n            width: width,\n            height: height,\n            alignment: alignment,\n            type: type\n        }\n\n        if (urlKey) {\n            contentState.replaceEntityData(urlKey, data)\n            const newEditorState = EditorState.push(editorState, contentState, \"apply-entity\")\n            updateStateForPopover(EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter()))\n        }\n        else {\n            const newEditorState = insertAtomicBlock(\"IMAGE\", data)\n            updateStateForPopover(EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter()))\n        }\n        setFocusMediaKey(\"\")\n    }\n\n    const updateStateForPopover = (editorState: EditorState) => {\n        handleChange(editorState)\n        refocus()\n        setState({\n            ...state,\n            anchorUrlPopover: undefined,\n            urlKey: undefined,\n            urlIsMedia: undefined,\n            urlData: undefined\n        })\n    }\n\n    const refocus = () => {\n        setTimeout(() => (editorRef.current as any).blur(), 0)\n        setTimeout(() => (editorRef.current as any).focus(), 1)\n    }\n\n    const toggleBlockType = (blockType: string) => {\n        handleChange(\n            RichUtils.toggleBlockType(\n                editorState,\n                blockType\n            )\n        )\n    }\n\n    const toggleInlineStyle = (inlineStyle: string) => {\n        handleChange(\n            RichUtils.toggleInlineStyle(\n                editorState,\n                inlineStyle\n            )\n        )\n    }\n\n    const focusMedia = (block: ContentBlock) => {\n        const newSeletion = SelectionState.createEmpty(block.getKey())\n        const newEditorState = EditorState.forceSelection(editorStateRef.current!, newSeletion)\n        editorStateRef.current = newEditorState\n        setFocusMediaKey(block.getKey())\n        handleChange(newEditorState)\n        handlePromptForMedia(false, newEditorState)\n    }\n\n    const blockRenderer = (contentBlock: ContentBlock) => {\n        const blockType = contentBlock.getType()\n        if (blockType === 'atomic') {\n            const contentState = editorState.getCurrentContent()\n            const entity = contentBlock.getEntityAt(0)\n            if (entity) {\n                const type = contentState.getEntity(entity).getType()\n                if (type === \"IMAGE\") {\n                    return {\n                        component: Media,\n                        editable: false,\n                        props: {\n                            onClick: focusMedia,\n                            readOnly: props.readOnly,\n                            focusKey: focusMediaKey\n                        }\n                    }\n                }\n                else {\n                    const block = atomicBlockExists(type.toLowerCase(), props.customControls)\n                    if (!block) {\n                        return null\n                    }\n                    return {\n                        component: block.atomicComponent,\n                        editable: false,\n                        props: contentState.getEntity(contentBlock.getEntityAt(0)).getData()\n                    }\n                }\n            }\n        }\n        return null\n    }\n\n    const insertAtomicBlock = (type: string, data: any, options?: any) => {\n        const contentState = editorState.getCurrentContent()\n        const contentStateWithEntity = contentState.createEntity(type, 'IMMUTABLE', data)\n        const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n        const newEditorStateRaw = EditorState.set(editorState, {\n            currentContent: contentStateWithEntity,\n            ...options\n        })\n        return AtomicBlockUtils.insertAtomicBlock(newEditorStateRaw, entityKey, ' ')\n    }\n\n    const keyBindingFn = (e: React.KeyboardEvent<{}>): string | null => {\n        if (hasCommandModifier(e) && props.keyCommands) {\n            const comm = props.keyCommands.find(comm => comm.key === e.keyCode)\n            if (comm) {\n                return comm.name\n            }\n        }\n        return getDefaultKeyBinding(e)\n    }\n\n    const renderToolbar = props.toolbar === undefined || props.toolbar\n    const inlineToolbarControls = props.inlineToolbarControls || [\"bold\", \"italic\", \"underline\", \"clear\"]\n    const editable = props.readOnly === undefined || !props.readOnly\n    const id = props.id || \"mui-rte\"\n    let className = \"\"\n    let placeholder: React.ReactElement | null = null\n    if (!focus) {\n        const contentState = editorState.getCurrentContent()\n        if (!contentState.hasText()) {\n            placeholder = (\n                <div\n                    className={classNames(classes.editorContainer, classes.placeHolder, {\n                        [classes.error]: props.error\n                    })}\n                    onClick={handleFocus}\n                >\n                    {props.label || \"\"}\n                </div>\n            )\n            className = classes.hidePlaceholder\n        }\n    }\n\n    const dismissPopover = () => {\n        refocus()\n        setState({\n            ...state,\n            anchorUrlPopover: undefined,\n            urlKey: undefined,\n            urlIsMedia: undefined,\n            urlData: undefined\n        })\n    }\n\n    return (\n        <div id={`${id}-root`} className={classes.root}>\n            <div id={`${id}-container`} className={classNames(classes.container, {\n                [classes.inheritFontSize]: props.inheritFontSize\n            })}>\n                {props.inlineToolbar && editable && state.toolbarPosition ?\n                    <Paper className={classes.inlineToolbar} style={{\n                        top: state.toolbarPosition.top + 75,\n                        left: state.toolbarPosition.left\n                    }}>\n                        <Toolbar\n                            id={id}\n                            editorState={editorState}\n                            onClick={handleToolbarClick}\n                            controls={inlineToolbarControls}\n                            customControls={customControls}\n                        />\n                    </Paper>\n                    : null}\n                {renderToolbar ?\n                    <Toolbar\n                        id={id}\n                        editorState={editorState}\n                        onClick={handleToolbarClick}\n                        controls={controls}\n                        customControls={customControls}\n                        className={classes.toolbar}\n                        disabled={!editable}\n                        size={props.toolbarButtonSize}\n                    />\n                    : null}\n                {placeholder}\n                <div id={`${id}-editor`} className={classes.editor}>\n                    <div id={`${id}-editor-container`} className={classNames(className, classes.editorContainer, {\n                        [classes.editorReadOnly]: !editable,\n                        [classes.error]: props.error\n                    })} onClick={handleFocus} onBlur={handleBlur}>\n                        <Editor\n                            customStyleMap={customRenderers.style}\n                            blockRenderMap={customRenderers.block}\n                            blockRendererFn={blockRenderer}\n                            editorState={editorState}\n                            onChange={handleChange}\n                            readOnly={props.readOnly}\n                            handleKeyCommand={handleKeyCommand}\n                            handleBeforeInput={handleBeforeInput}\n                            keyBindingFn={keyBindingFn}\n                            ref={editorRef}\n                            {...props.draftEditorProps}\n                        />\n                    </div>\n                </div>\n                {state.anchorUrlPopover ?\n                    <UrlPopover\n                        data={state.urlData}\n                        anchor={state.anchorUrlPopover}\n                        onConfirm={handleConfirmPrompt}\n                        onCancel={dismissPopover}\n                        isMedia={state.urlIsMedia}\n                    />\n                    : null}\n            </div>\n        </div>\n    )\n}\n\nexport { findLinkEntities, findDecoWithRegex }\nexport default withStyles(styles, { withTheme: true, name: \"MUIRichTextEditor\" })(forwardRef(MUIRichTextEditor))\n"],"names":["React.createElement","React","IconButton","Modifier","SelectionState","useEffect","createStyles","withStyles","styles","Popover","Grid","TextField","Button","Blockquote","CodeBlock","useRef","useImperativeHandle","DefaultDraftBlockRenderMap","getVisibleSelectionRect","RichUtils","convertToRaw","EditorState","Media","AtomicBlockUtils","getDefaultKeyBinding","Paper","Editor","UrlPopover","forwardRef"],"mappings":"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"}